{"version":3,"sources":["components/vote/enter-voting-code/styles.ts","components/vote/enter-voting-code/getCodeValidity.ts","components/vote/enter-voting-code/EnterVotingCode.tsx","components/vote/get-data/service.ts","components/vote/error-display/styles.ts","components/vote/error-display/ErrorDisplay.tsx","components/vote/enter-name/styles.ts","components/vote/enter-name/EnterName.tsx","components/vote/vote-option/styles.ts","components/vote/vote-option/VoteOption.tsx","components/vote/select-options/service.ts","types/Alert.ts","components/vote/select-options/styles.ts","components/common-components/snackbar-alert/SnackbarAlert.tsx","components/vote/select-options/SelectOptions.tsx","components/vote/perform-voting/PerformVoting.tsx","components/vote/get-data/useGetVotingData.ts","components/vote/vote-main/Vote.tsx"],"names":["useStyles","makeStyles","theme","createStyles","textFieldInput","width","marginTop","button","backgroundColor","palette","secondary","main","container","display","flexDirection","justifyContent","alignItems","marginBottom","getCodeValidity","code","length","test","EnterVotingCode","classes","useState","setCode","dispatch","useContext","AppContext","className","TextField","value","variant","label","placeholder","onChange","event","target","id","Button","onClick","type","actionTypes","SET_VOTING_NUMBER","data","Typography","baseUrl","getVotingData","votingNumber","a","axios","get","response","console","log","formatVoting","toString","undefined","responseData","voting","question","parseQuestion","parseVotingNumber","voting_number","showNames","parseShowNames","show_names","allowedCount","parseAllowedCount","allowed_count","created","parseCreated","optionVotes","parseOptionVotes","option_votes","isString","text","String","isNumber","number","Number","Error","Boolean","Array","isArray","map","optionVote","parseOneOptionVote","optionData","parseId","optionText","parseOptionText","option_text","optionVoters","parseOptionVoters","option_voters","voters","parseVoters","votersAllNull","every","voter","votersAllNames","color","error","textAlign","ErrorDisplay","instructionText","EnterName","setVoterName","name","setName","buttonsContainer","unvoteButton","primary","contrastText","marginLeft","height","voteButton","light","VoteOption","votes","changeSelection","remaining","votingDone","voteThisOption","preventDefault","fill","VoteAction","UNVOTE","item","index","disabled","VOTE","Severity","submitSelectedVotingOptions","selectedVotingOptionsData","post","questionText","submitButtonContainer","submitButton","dark","submitButtonText","linkText","SnackbarAlert","alert","Snackbar","open","isOpen","autoHideDuration","onClose","severity","message","SelectOptions","voterName","state","votingData","setVotingDone","dictionary","forEach","getSelectionsDictionary","selectionDictionary","setSelectionDictionary","setAlert","action","votesGiven","reduce","total","current","updated","getAnswers","answers","Object","entries","optionId","numberOfVotes","numbers","parseInt","concat","vote","SUCCESS","ERROR","remainingNumberOfVotes","to","PerformVoting","errorInGettingData","setErrorInGettingData","useEffect","SET_VOTING_DATA","getData","useGetVotingData","Vote"],"mappings":"qLAIaA,EAAYC,aAAW,SAACC,GAAD,OAChCC,YAAa,CACTC,eAAgB,CACZC,MAAO,MACPC,UAAW,IAEfC,OAAQ,CACJC,gBAAiBN,EAAMO,QAAQC,UAAUC,KACzCL,UAAW,IAEfM,UAAW,CACPC,QAAS,OACTC,cAAe,SACfC,eAAgB,SAChBC,WAAY,SACZV,UAAW,GACXW,cAAe,EACfZ,MAAO,YCrBNa,EAAkB,SAACC,GAE5B,OAAuB,IAAhBA,EAAKC,QADa,WACoBC,KAAKF,I,gBC8CvCG,EArCmB,WAE9B,IAAMC,EAAUvB,IAFoB,EAGZwB,mBAAS,IAHG,mBAG7BL,EAH6B,KAGvBM,EAHuB,KAI5BC,EAAaC,qBAAWC,KAAxBF,SAYR,OACI,sBAAKG,UAAWN,EAAQX,UAAxB,UACI,cAACkB,EAAA,EAAD,CACIC,MAAOZ,EACPa,QAAQ,WACRC,MAAM,yBACNC,YAAY,6BACZC,SAjBe,SAACC,GACxBX,EAAQW,EAAMC,OAAON,QAiBbF,UAAWN,EAAQnB,eACnBkC,GAAG,mBAENpB,EAAgBC,IACb,cAACoB,EAAA,EAAD,CAAQC,QAlBI,WACpBd,EAAS,CAAEe,KAAMC,IAAYC,kBAAmBC,KAAMzB,KAiBZU,UAAWN,EAAQhB,OAAQ+B,GAAG,mBAAhE,SACI,cAACO,EAAA,EAAD,+B,6CCpChBC,EAAU,wBAEVA,EAAU,yCAKP,IAAMC,EAAa,uCAAG,WAAOC,GAAP,eAAAC,EAAA,+EAEEC,IAAMC,IAAN,UAAaL,EAAb,oBAAgCE,IAFlC,cAEfI,EAFe,OAGrBC,QAAQC,IAAI,UACZD,QAAQC,IAAIF,EAASR,MAJA,kBAKdW,EAAaH,EAASR,OALR,uCAOrBS,QAAQC,IAAR,MACAD,QAAQC,IAAI,KAAME,YARG,uBASdC,GATc,yDAAH,sDAcpBF,EAAe,SAACG,GAClB,IAAMC,EAASD,EACf,MAAO,CACHE,SAAUC,EAAcF,EAAOC,UAC/BZ,aAAcc,EAAkBH,EAAOI,eACvCC,UAAWC,EAAeN,EAAOO,YACjCC,aAAcC,EAAkBT,EAAOU,eACvCC,QAASC,EAAaZ,EAAOW,SAC7BE,YAAaC,EAAiBd,EAAOe,gBAKvCC,EAAW,SAACC,GACd,MAAuB,kBAATA,GAAqBA,aAAgBC,QAKjDC,EAAW,SAACC,GACd,MAAyB,kBAAXA,GAAuBA,aAAkBC,QAErDnB,EAAgB,SAACD,GACnB,IAAKA,IAAae,EAASf,GAAW,MAAM,IAAIqB,MAAM,4CACtD,OAAOrB,GAELE,EAAoB,SAACd,GACvB,IAAKA,IAAiB2B,EAAS3B,GAAe,MAAM,IAAIiC,MAAM,iDAC9D,OAAOjC,GAELiB,EAAiB,SAACD,GACpB,QAAkBP,IAAdO,GAAyC,OAAdA,KAdP,mBADTjC,EAeiDiC,IAd3BjC,aAAiBmD,SAcsB,MAAM,IAAID,MAAM,uDAf9E,IAAClD,EAgBf,OAAOiC,GAELI,EAAoB,SAACD,GACvB,IAAKA,IAAiBW,EAASX,GAAe,MAAM,IAAIc,MAAM,mDAC9D,OAAOd,GAELI,EAAe,SAACD,GAClB,IAAKA,IAAYK,EAASL,GAAU,MAAM,IAAIW,MAAM,wCACpD,OAAOX,GAELG,EAAmB,SAACD,GACtB,IAAKA,IAAgBW,MAAMC,QAAQZ,GAAc,MAAM,IAAIS,MAAM,6DACjE,OAAOT,EAAYa,KAAI,SAAAC,GAAU,OAAIC,EAAmBD,OAGtDC,EAAqB,SAACD,GACxB,IAAME,EAAaF,EACnB,MAAO,CACHhD,GAAImD,EAAQD,EAAWlD,IACvBoD,WAAYC,EAAgBH,EAAWI,aACvCC,aAAcC,EAAkBN,EAAWO,iBAG7CN,EAAU,SAACnD,GACb,IAAKA,IAAOwC,EAASxC,GAAK,MAAM,IAAI2C,MAAM,+CAC1C,OAAO3C,GAELqD,EAAkB,SAACf,GACrB,IAAKA,IAASD,EAASC,GAAO,MAAM,IAAIK,MAAM,+CAC9C,OAAOL,GAELkB,EAAoB,SAACE,GACvB,IAAKA,IAAWb,MAAO,MAAM,IAAIF,MAAM,sEACvC,OAAgD,IAA3Ce,EAAgC5E,QAAwD,OAAvC4E,EAAgC,GAAoB,GACnGC,EAAYD,IAEjBE,EAAgB,SAACF,GAEnB,OADmBA,EACDG,OAAM,SAAAC,GAAK,OAAc,OAAVA,MAM/BH,EAAc,SAACD,GACjB,IAAKE,EAAcF,KALA,SAACA,GAEpB,OADmBA,EACDG,OAAM,SAAAC,GAAK,OAAIzB,EAASyB,MAGXC,CAAeL,GAAS,MAAM,IAAIf,MAAM,sEACvE,OAAIiB,EAAcF,GAAgBA,GCnGzBhG,EAAYC,aAAW,SAACC,GAAD,OAChCC,YAAa,CACTS,UAAW,CACPN,UAAW,IAEfsE,KAAM,CACF0B,MAAOpG,EAAMO,QAAQ8F,MAAM5F,KAC3B6F,UAAW,SACXlG,UAAW,SCgBRmG,EAnBmC,SAAC,GAAsB,IAApBzD,EAAmB,EAAnBA,aAE3CzB,EAAUvB,IAEhB,OACI,sBAAK6B,UAAWN,EAAQX,UAAxB,UACI,cAACiC,EAAA,EAAD,CAAYb,QAAQ,KAAKH,UAAWN,EAAQqD,KAA5C,2BAGA,cAAC/B,EAAA,EAAD,CAAYb,QAAQ,KAAKH,UAAWN,EAAQqD,KAA5C,SACI,iCAAS5B,MAEb,cAACH,EAAA,EAAD,CAAYb,QAAQ,KAAKH,UAAWN,EAAQqD,KAA5C,6CCjBC5E,EAAYC,aAAW,SAACC,GAAD,OAChCC,YAAa,CACTC,eAAgB,CACZC,MAAO,MACPC,UAAW,IAEfC,OAAQ,CACJC,gBAAiBN,EAAMO,QAAQC,UAAUC,KACzCL,UAAW,IAEfM,UAAW,CACPC,QAAS,OACTC,cAAe,SACfC,eAAgB,SAChBC,WAAY,SACZV,UAAW,GACXW,cAAe,EACfZ,MAAO,OAEXqG,gBAAiB,CACbF,UAAW,eCuBRG,EAnC6B,SAAC,GAAsB,IAApBC,EAAmB,EAAnBA,aAErCrF,EAAUvB,IAF8C,EAGtCwB,mBAAS,IAH6B,mBAGvDqF,EAHuD,KAGjDC,EAHiD,KAY9D,OACI,sBAAKjF,UAAWN,EAAQX,UAAxB,UACI,cAACiC,EAAA,EAAD,CAAYhB,UAAWN,EAAQmF,gBAA/B,oCACA,cAAC7D,EAAA,EAAD,yDACA,cAACf,EAAA,EAAD,CACIC,MAAO8E,EACP7E,QAAQ,WACRC,MAAM,YACNC,YAAY,sBACZC,SAhBe,SAACC,GACxB0E,EAAQ1E,EAAMC,OAAON,QAgBbF,UAAWN,EAAQnB,eACnBkC,GAAG,mBAENuE,EAAKzF,OAAS,GACX,cAACmB,EAAA,EAAD,CAAQC,QAlBH,WACboE,EAAaC,IAiBsBhF,UAAWN,EAAQhB,OAAQ+B,GAAG,mBAAzD,SACI,cAACO,EAAA,EAAD,8B,QCnCP7C,EAAYC,aAAW,SAACC,GAAD,OAChCC,YAAa,CACTuF,WAAY,CACRc,UAAW,SACXlG,UAAW,IAEfyG,iBAAkB,CACdlG,QAAS,OACTC,cAAe,MACfC,eAAgB,SAChBC,WAAY,UAGhBgG,aAAc,CACVxG,gBAAiBN,EAAMO,QAAQwG,QAAQtG,KACvC2F,MAAOpG,EAAMO,QAAQwG,QAAQC,aAC7BC,WAAY,EACZC,OAAQ,IAEZC,WAAY,CACR7G,gBAAiBN,EAAMO,QAAQC,UAAU4G,MACzChB,MAAOpG,EAAMO,QAAQC,UAAUwG,aAC/BC,WAAY,EACZC,OAAQ,SCkCLG,EA5C+B,SAAC,GAAuE,IAArEjF,EAAoE,EAApEA,GAAIoD,EAAgE,EAAhEA,WAAY8B,EAAoD,EAApDA,MAAOC,EAA6C,EAA7CA,gBAAiBC,EAA4B,EAA5BA,UAAWC,EAAiB,EAAjBA,WAE1FpG,EAAUvB,IAGV4H,EAAiB,SAACxF,EAAsCwC,GAC1DxC,EAAMyF,iBACNJ,EAAgBnF,EAAIsC,IAGxB,OACI,gCACI,cAAC/B,EAAA,EAAD,CAAYb,QAAQ,KAAKH,UAAWN,EAAQmE,WAA5C,SAAyDA,IACzD,sBAAK7D,UAAWN,EAAQwF,iBAAxB,UACM,IAAI5B,MAAMqC,GAAOM,KAAKC,EAAWC,QAAQ3C,KAAI,SAAC4C,EAAMC,GAClD,OACI,cAAC3F,EAAA,EAAD,CAEIC,QAAS,SAACJ,GAAD,OAAWwF,EAAexF,EAAO6F,IAC1CpG,UAAWN,EAAQyF,aACnBmB,SAAUR,EAJd,SAMKM,GALIC,EAAQ5F,EAAK,aAS5B,IAAI6C,MAAMuC,GAAWI,KAAKC,EAAWK,MAAM/C,KAAI,SAAC4C,EAAMC,GACpD,OACI,cAAC3F,EAAA,EAAD,CAEIC,QAAS,SAACJ,GAAD,OAAWwF,EAAexF,EAAO6F,IAC1CpG,UAAWN,EAAQ8F,WACnBc,SAAUR,EAJd,SAMKM,GALIC,EAAQ5F,EAAK,kBC5C1CQ,EAAU,wBAEVA,EAAU,yCAWP,ICfKuF,EDeCC,EAA2B,uCAAG,WAAOC,GAAP,SAAAtF,EAAA,+EAE7BC,IAAMsF,KAAN,UAAsB1F,EAAtB,YAAyCyF,GAFZ,iCAG5B,GAH4B,0DAK5B,GAL4B,wDAAH,sDEZ3BvI,EAAYC,aAAW,SAACC,GAAD,OAChCC,YAAa,CACTsI,aAAc,CACVjC,UAAW,SACXlG,UAAW,IAEfoI,sBAAuB,CACnB7H,QAAS,OACTC,cAAe,SACfC,eAAgB,SAChBC,WAAY,SACZV,UAAW,IAEfqI,aAAc,CACVnI,gBAAiBN,EAAMO,QAAQwG,QAAQ2B,MAE3CC,iBAAkB,CACdvC,MAAOpG,EAAMO,QAAQwG,QAAQC,cAEjC4B,SAAU,CACNxC,MAAOpG,EAAMO,QAAQwG,QAAQtG,W,kBCJ1BoI,EAVqC,SAAC,GAAe,IAAbC,EAAY,EAAZA,MACnD,OACI,cAACC,EAAA,EAAD,CAAU3G,GAAG,iBAAiB4G,KAAMF,EAAMG,OAAQC,iBAAkBJ,EAAMI,iBAAkBC,QAASL,EAAMK,QAA3G,SACI,cAAC,IAAD,CAAUrH,QAAQ,SAASsH,SAAUN,EAAMM,SAAUD,QAASL,EAAMK,QAAS/G,GAAE,gBAAW0G,EAAMM,UAAhG,SACKN,EAAMO,c,SFbXlB,K,cAAAA,E,kBAAAA,E,mBAAAA,M,SGiBAN,E,kBAAAA,K,YAAAA,E,iBAAAA,M,KAUZ,IA4GeyB,GAjGqC,SAAC,GAAmB,IAAjBC,EAAgB,EAAhBA,UAE7ClI,EAAUvB,IAER0J,EAAU/H,qBAAWC,KAArB8H,MAJ2D,EAK9ClI,mBAASkI,EAAMC,YAA7BA,EAL4D,sBAM/BnI,oBAAS,GANsB,mBAM5DmG,EAN4D,KAMhDiC,EANgD,OAObpI,mBAlB1B,SAACmI,GAC7B,GAAKA,EAAL,CACA,IAAME,EAAqC,GAI3C,OAHAF,EAAWnF,YAAYsF,SAAQ,SAAA7B,GAC3B4B,EAAW5B,EAAK3F,IAAM,KAEnBuH,GAYwDE,CAAwBL,EAAMC,aAP1B,mBAO5DK,EAP4D,KAOvCC,EAPuC,OAQzCzI,wBAA4BiC,GARa,mBAQ5DuF,EAR4D,KAQrDkB,EARqD,KAYnE,IAAKP,IAAeK,EAAqB,OAAO,KAGhD,IAAMvC,EAAkB,SAACnF,EAAY6H,GACjC,IAAMC,EAAaT,EAAWnF,YAAY6F,QAAO,SAACC,EAAOC,GAAR,OAAoBD,EAAQN,EAAoBO,EAAQjI,MAAK,GAC9G,GAAI6H,IAAWpC,EAAWK,MAAQgC,EAAaT,EAAWxF,aAAc,CACpE,IAAMqG,EAAO,eAAQR,GACrBQ,EAAQlI,GAAM0H,EAAoB1H,GAAM,EACxC2H,EAAuBO,QACpB,GAAIR,EAAoB1H,GAAM,EAAG,CACpC,IAAMkI,EAAO,eAAQR,GACrBQ,EAAQlI,GAAM0H,EAAoB1H,GAAM,EACxC2H,EAAuBO,KAIzBC,EAAa,WAEf,IADA,IAAIC,EAAoB,GACxB,MAAwCC,OAAOC,QAAQZ,GAAvD,eAA6E,CAAC,IAAD,sBAAjEa,EAAiE,KAAvDC,EAAuD,KACnEC,EAAU,IAAI5F,MAAM2F,GAAehD,KAAKkD,SAASH,IACvDH,EAAUA,EAAQO,OAAOF,GAE7B,OAAOL,GAGLQ,EAAI,uCAAG,gCAAAjI,EAAA,6DACHsF,EAAuD,CACzD1B,KAAM4C,EACNiB,QAASD,KAHJ,SAKkBnC,EAA4BC,GAL9C,eAOCS,EAAe,CAAEG,QAAQ,EAAMG,SAAUjB,EAAS8C,QAAS5B,QAAS,4BAA6BF,QAAS,kBAAMa,OAASzG,IAAY2F,iBAAkB,KAC7Jc,EAASlB,GACTY,GAAc,KAERZ,EAAe,CAAEG,QAAQ,EAAMG,SAAUjB,EAAS+C,MAAO7B,QAAS,0BAA2BF,QAAS,kBAAMa,OAASzG,IAAY2F,iBAAkB,KACzJc,EAASlB,IAZJ,2CAAH,qDAmBJoB,EAAaT,EAAWnF,YAAY6F,QAAO,SAACC,EAAOC,GAAR,OAAoBD,EAAQN,EAAoBO,EAAQjI,MAAK,GACxG+I,EAAyB1B,EAAWxF,aAAeiG,EAGzD,OACI,gCACI,cAACvH,EAAA,EAAD,CAAYb,QAAQ,KAAKH,UAAWN,EAAQkH,aAA5C,SACI,iCAASkB,EAAW/F,aAEvB+F,EAAWnF,YAAYa,KAAI,SAAA4C,GAAI,OAAI,cAAC,EAAD,CAEhC3F,GAAI2F,EAAK3F,GACToD,WAAYuC,EAAKvC,WACjB+B,gBAAiBA,EACjBD,MAAOwC,EAAoB/B,EAAK3F,IAChCoF,UAAW2D,EACX1D,WAAYA,GANPM,EAAKvC,eAQd,sBAAK7D,UAAWN,EAAQmH,sBAAxB,WACMf,GAAcyC,EAAa,GAC7B,cAAC7H,EAAA,EAAD,CAAQC,QAAS0I,EAAMlJ,QAAQ,YAAaH,UAAWN,EAAQoH,aAA/D,SACI,cAAC9F,EAAA,EAAD,CAAYhB,UAAWN,EAAQsH,iBAA/B,4BAKHlB,GACG,cAAC9E,EAAA,EAAD,UACI,cAAC,IAAD,CAAMyI,GAAG,QAAQzJ,UAAWN,EAAQuH,SAApC,gDAOXE,GAAS,cAAC,EAAD,CAAeA,MAAOA,QC1G7BuC,GAdiB,WAAO,IAAD,EAEA/J,wBAA6BiC,GAF7B,mBAE3BgG,EAF2B,KAEhB7C,EAFgB,KAG1B8C,EAAU/H,qBAAWC,KAArB8H,MACA8B,ECHoB,WAAyB,IAAD,EAEAhK,oBAAS,GAFT,mBAE7CgK,EAF6C,KAEzBC,EAFyB,OAGxB9J,qBAAWC,KAA/B8H,EAH4C,EAG5CA,MAAOhI,EAHqC,EAGrCA,SAmBf,OAjBAgK,qBAAU,WAAM,4CACZ,4BAAAzI,EAAA,8DAC+BQ,IAAvBiG,EAAM1G,aADd,gCAE6BD,EAAc2G,EAAM1G,cAFjD,YAGuBS,KADTE,EAFd,QAIYjC,EAAS,CAAEe,KAAMC,IAAYiJ,gBAAiB/I,KAAMe,IAEpD8H,GAAsB,GANlC,4CADY,uBAAC,WAAD,wBAYZG,KACD,IAII,CACHJ,sBDpB2BK,GAAvBL,mBAGR,OAAK9B,EAAM1G,aACPwI,EAA2B,cAAC,EAAD,CAAcxI,aAAc0G,EAAM1G,eAC5D0G,EAAMC,WACPD,EAAMC,WAAW3F,YAAcyF,EAAkB,cAAC,EAAD,CAAW7C,aAAcA,IACvE,cAAC,GAAD,CAAe6C,UAAWA,IAFH,KAFE,MEQrBqC,UAjBQ,WAAO,IAElBpC,EAAU/H,qBAAWC,KAArB8H,MAGR,OACI,mCAC4BjG,IAAvBiG,EAAM1G,aACH,cAAC,EAAD,IAEA,cAAC,GAAD","file":"static/js/9.6de0522f.chunk.js","sourcesContent":["import { makeStyles, createStyles } from '@material-ui/core/styles'\nimport { Theme } from '@material-ui/core'\n\n\nexport const useStyles = makeStyles((theme: Theme) => \n    createStyles({\n        textFieldInput: {\n            width: '90%',\n            marginTop: 20,\n        },\n        button: {\n            backgroundColor: theme.palette.secondary.main,\n            marginTop: 10\n        },\n        container: {\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            alignItems: 'center',\n            marginTop: 10,\n            marginBottom: -5,\n            width: '85%',\n        },\n\n    })\n)","export const getCodeValidity = (code: string): boolean => {\n    const onlyNumbersRegex = /^[0-9]+$/\n    return code.length === 6 && onlyNumbersRegex.test(code)\n}","import React, { useContext, useState } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport { useStyles } from './styles'\nimport { getCodeValidity } from './getCodeValidity'\nimport AppContext from '../../../state/AppContext'\nimport { actionTypes } from '../../../state/actions'\n\n\n\nconst EnterVotingCode: React.FC = () => {\n\n    const classes = useStyles()\n    const [code, setCode] = useState('')\n    const { dispatch } = useContext(AppContext)\n \n    const handleInputChanged = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setCode(event.target.value)\n    }\n\n    const storeVotingCode = () => {\n        dispatch({ type: actionTypes.SET_VOTING_NUMBER, data: code })\n    }    \n\n\n\n    return(\n        <div className={classes.container}>\n            <TextField\n                value={code}\n                variant='outlined'\n                label='Voting code (6 digits)'\n                placeholder='Type the 6-digit code here'\n                onChange={handleInputChanged}\n                className={classes.textFieldInput}\n                id='code-textfield'\n            />\n            {getCodeValidity(code) &&\n                <Button onClick={storeVotingCode} className={classes.button} id='fetchData-button'>\n                    <Typography>GET VOTING</Typography>\n                </Button>\n            }\n        </div>\n      \n    )\n}\n\nexport default EnterVotingCode","import axios from 'axios'\nimport { OptionVote } from '../../../types/OptionVote'\nimport { Voting } from '../../../types/Voting'\n\nlet baseUrl = 'http://localhost:3001'\nif (process.env.NODE_ENV === 'production') {\n    baseUrl = 'https://lotsofdotsserver.herokuapp.com'\n}\n\n\n\nexport const getVotingData = async (votingNumber: string): Promise<Voting | undefined> => {\n    try {\n        const response = await axios.get(`${baseUrl}/votings/${votingNumber}`)\n        console.log('******')\n        console.log(response.data)\n        return formatVoting(response.data)\n    } catch (error) {\n        console.log(error)\n        console.log(error.toString())\n        return undefined\n    }\n}\n\n\nconst formatVoting = (responseData: unknown): Voting => {\n    const voting = responseData as ResponseVoting\n    return {\n        question: parseQuestion(voting.question),\n        votingNumber: parseVotingNumber(voting.voting_number),\n        showNames: parseShowNames(voting.show_names),\n        allowedCount: parseAllowedCount(voting.allowed_count),\n        created: parseCreated(voting.created),\n        optionVotes: parseOptionVotes(voting.option_votes)\n    }\n\n}\n\nconst isString = (text: unknown): text is string => {\n    return typeof text === 'string' || text instanceof String\n}\nconst isBoolean = (value: unknown): value is boolean => {\n    return typeof value === 'boolean' || value instanceof Boolean\n}\nconst isNumber = (number: unknown): number is number => {\n    return typeof number === 'number' || number instanceof Number\n}\nconst parseQuestion = (question: unknown): string => {\n    if (!question || !isString(question)) throw new Error('Question is required and must be string!')\n    return question\n}\nconst parseVotingNumber = (votingNumber: unknown): string => {\n    if (!votingNumber || !isString(votingNumber)) throw new Error('Voting number is required and must be string!')\n    return votingNumber\n}\nconst parseShowNames = (showNames: unknown): boolean => {\n    if (showNames === undefined || showNames === null || !isBoolean(showNames)) throw new Error('Show names is required and must be a boolean value!')\n    return showNames\n}\nconst parseAllowedCount = (allowedCount: unknown): number => {\n    if (!allowedCount || !isNumber(allowedCount)) throw new Error('Allowed count is required and must be a number!')\n    return allowedCount\n}\nconst parseCreated = (created: unknown): string => {\n    if (!created || !isString(created)) throw new Error('Date is required and must be string!')\n    return created\n}\nconst parseOptionVotes = (optionVotes: unknown): OptionVote[] => {\n    if (!optionVotes || !Array.isArray(optionVotes)) throw new Error('Options are required and must be an array of option data!')\n    return optionVotes.map(optionVote => parseOneOptionVote(optionVote))\n}\n\nconst parseOneOptionVote = (optionVote: unknown): OptionVote => {\n    const optionData = optionVote as ResponseOptionVote\n    return {\n        id: parseId(optionData.id),\n        optionText: parseOptionText(optionData.option_text),\n        optionVoters: parseOptionVoters(optionData.option_voters)\n    }\n}\nconst parseId = (id: unknown): number => {\n    if (!id || !isNumber(id)) throw new Error('Option Id is required and must be a number!')\n    return id\n}\nconst parseOptionText = (text: unknown): string => {\n    if (!text || !isString(text)) throw new Error('Option text is required and must be string!')\n    return text\n}\nconst parseOptionVoters = (voters: unknown): string[] | null[] => {\n    if (!voters || !Array) throw new Error('Option voters are required and must be an array of string or null!')\n    if ((voters as Array<string | null>).length === 1 && (voters as Array<string | null>)[0] === null) return []\n    return parseVoters(voters)\n}\nconst votersAllNull = (voters: unknown): boolean => {\n    const votersNull = voters as null[]\n    return votersNull.every(voter => voter === null)\n}\nconst votersAllNames = (voters: unknown): boolean => {\n    const votersNull = voters as string[]\n    return votersNull.every(voter => isString(voter))\n}\nconst parseVoters = (voters: unknown): string[] | null[] => {\n    if (!votersAllNull(voters) && !votersAllNames(voters)) throw new Error('Option voters are required and must be an array of string or null!')\n    if (votersAllNull(voters)) return voters as null[]\n    return voters as string[]\n}\n\ntype ResponseVoting = {\n    question: string,\n    voting_number: string,\n    show_names: boolean,\n    allowed_count: number,\n    created: string,\n    option_votes: ResponseOptionVote[]\n}\ntype ResponseOptionVote = {\n    id: number,\n    option_text: string,\n    option_voters: string[] | null[]\n}\n\n\n\n","import { makeStyles, createStyles } from '@material-ui/core/styles'\nimport { Theme } from '@material-ui/core'\n\n\nexport const useStyles = makeStyles((theme: Theme) => \n    createStyles({\n        container: {\n            marginTop: 40,\n        },\n        text: {\n            color: theme.palette.error.main,\n            textAlign: 'center',\n            marginTop: 10\n        },\n    })\n)","import React from 'react'\nimport { Typography } from '@material-ui/core'\nimport { useStyles } from './styles'\n\n\ntype ErrorDisplayProps = {\n    votingNumber: string\n}\n\nconst ErrorDisplay: React.FC<ErrorDisplayProps> = ({ votingNumber }) => {\n\n    const classes = useStyles()\n\n    return (\n        <div className={classes.container}>\n            <Typography variant='h6' className={classes.text}>\n                Voting number\n            </Typography>\n            <Typography variant='h4' className={classes.text}>\n                <strong>{votingNumber}</strong>\n            </Typography>\n            <Typography variant='h6' className={classes.text}>\n                Could not find that voting!\n            </Typography>\n        </div>\n    )\n}\n\nexport default ErrorDisplay\n\n\n","import { makeStyles, createStyles } from '@material-ui/core/styles'\nimport { Theme } from '@material-ui/core'\n\n\nexport const useStyles = makeStyles((theme: Theme) => \n    createStyles({\n        textFieldInput: {\n            width: '90%',\n            marginTop: 20,\n        },\n        button: {\n            backgroundColor: theme.palette.secondary.main,\n            marginTop: 10\n        },\n        container: {\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            alignItems: 'center',\n            marginTop: 30,\n            marginBottom: -5,\n            width: '85%',\n        },\n        instructionText: {\n            textAlign: 'center'\n        }\n\n    })\n)","import React, { useState } from 'react'\nimport Typography from '@material-ui/core/Typography'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport { useStyles } from './styles'\n\n\ntype EnterNameProps = {\n    setVoterName: (name: string) => void\n}\n\n\nconst EnterName: React.FC<EnterNameProps> = ({ setVoterName }) => {\n\n    const classes = useStyles()\n    const [name, setName] = useState('')\n\n    const handleInputChanged = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setName(event.target.value)\n    }\n    const saveName = () => {\n        setVoterName(name)\n    }\n\n    return(\n        <div className={classes.container}>\n            <Typography className={classes.instructionText}>Please give your name.</Typography>\n            <Typography>(Note that others will see how you voted.)</Typography>\n            <TextField\n                value={name}\n                variant='outlined'\n                label='Your name'\n                placeholder='Type your name here'\n                onChange={handleInputChanged}\n                className={classes.textFieldInput}\n                id='name-textfield'\n            />\n            {name.length > 3 &&\n                <Button onClick={saveName} className={classes.button} id='fetchData-button'>\n                    <Typography>SAVE NAME</Typography>\n                </Button>\n            }\n        </div>\n      \n    )\n}\n\nexport default EnterName","import { makeStyles, createStyles } from '@material-ui/core/styles'\nimport { Theme } from '@material-ui/core'\n\n\nexport const useStyles = makeStyles((theme: Theme) => \n    createStyles({\n        optionText: {\n            textAlign: 'center',\n            marginTop: 20\n        },\n        buttonsContainer: {\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'center',\n            alignItems: 'center',\n  \n        },\n        unvoteButton: {\n            backgroundColor: theme.palette.primary.main,\n            color: theme.palette.primary.contrastText,\n            marginLeft: 3,\n            height: 25\n        },\n        voteButton: {\n            backgroundColor: theme.palette.secondary.light,\n            color: theme.palette.secondary.contrastText,\n            marginLeft: 3,\n            height: 25\n        }\n    })\n)","import React from 'react'\nimport { Typography, Button } from '@material-ui/core'\nimport { VoteAction } from '../select-options/SelectOptions'\nimport { useStyles } from './styles'\n\n\ntype VoteOptionProps = {\n    id: number,\n    optionText: string,\n    votes: number,\n    changeSelection: (id: number, action: VoteAction) => void,\n    remaining: number,\n    votingDone: boolean,\n}\n\n\n\nconst VoteOption: React.FC<VoteOptionProps> = ({ id, optionText, votes, changeSelection, remaining, votingDone }) => {\n\n    const classes = useStyles()\n\n    \n    const voteThisOption = (event: React.MouseEvent<HTMLElement>, text: VoteAction) => {\n        event.preventDefault()\n        changeSelection(id, text)\n    }\n    \n    return(\n        <div>\n            <Typography variant='h6' className={classes.optionText}>{optionText}</Typography>\n            <div className={classes.buttonsContainer}>\n                {(new Array(votes).fill(VoteAction.UNVOTE).map((item, index) => {\n                    return (\n                        <Button\n                            key={index + id + 'unvote'}\n                            onClick={(event) => voteThisOption(event, item)}\n                            className={classes.unvoteButton}\n                            disabled={votingDone}\n                        >\n                            {item}\n                        </Button>\n                    )\n                }))}\n                {(new Array(remaining).fill(VoteAction.VOTE).map((item, index) => {\n                    return (\n                        <Button\n                            key={index + id + 'vote'}\n                            onClick={(event) => voteThisOption(event, item)}\n                            className={classes.voteButton}\n                            disabled={votingDone}\n                        >\n                            {item}\n                        </Button>\n                    )\n                }))}\n            </div>\n        </div>\n      \n    )\n}\n\nexport default VoteOption\n\n\n\n","import axios from 'axios'\n\nlet baseUrl = 'http://localhost:3001'\nif (process.env.NODE_ENV === 'production') {\n    baseUrl = 'https://lotsofdotsserver.herokuapp.com'\n}\n\n\nexport type SelectedVotingOptionsData = {\n    name: string | undefined,\n    answers: number[]\n}\n\n\n\nexport const submitSelectedVotingOptions = async (selectedVotingOptionsData: SelectedVotingOptionsData): Promise<boolean> => {\n    try {\n        await axios.post<string>(`${baseUrl}/answers`, selectedVotingOptionsData)\n        return true\n    } catch (error) {\n        return false\n    }\n}\n\n","export enum Severity {\n    ERROR = 'error',\n    WARNING = 'warning',\n    SUCCESS = 'success'\n}\n\nexport type Alert = {\n    isOpen: boolean,\n    severity: Severity,\n    message: string,\n    onClose: () => void,\n    autoHideDuration: number\n}","import { makeStyles, createStyles } from '@material-ui/core/styles'\nimport { Theme } from '@material-ui/core'\n\nexport const useStyles = makeStyles((theme: Theme) => \n    createStyles({\n        questionText: {\n            textAlign: 'center',\n            marginTop: 20\n        },\n        submitButtonContainer: {\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            alignItems: 'center',\n            marginTop: 40,\n        },\n        submitButton: {\n            backgroundColor: theme.palette.primary.dark\n        },\n        submitButtonText: {\n            color: theme.palette.primary.contrastText\n        },\n        linkText: {\n            color: theme.palette.primary.main,\n        }\n\n    })\n)","import React from 'react'\nimport { Alert } from '../../../types/Alert'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport MuiAlert from '@material-ui/lab/Alert'\n\ntype SnackbarAlertProps = {\n    alert: Alert\n}\n\nconst SnackbarAlert: React.FC<SnackbarAlertProps> = ({ alert }) => {\n    return (\n        <Snackbar id='snackbar-alert' open={alert.isOpen} autoHideDuration={alert.autoHideDuration} onClose={alert.onClose}>\n            <MuiAlert variant='filled' severity={alert.severity} onClose={alert.onClose} id={`alert-${alert.severity}`}>\n                {alert.message}\n            </MuiAlert>\n        </Snackbar>\n    )\n}\n\nexport default SnackbarAlert\n","import React from 'react'\nimport { useContext } from 'react'\nimport { useState } from 'react'\nimport AppContext from '../../../state/AppContext'\n// import { getVotingData } from './service'\n// import { actionTypes } from '../../../state/actions'\nimport { Button, Typography } from '@material-ui/core'\nimport VoteOption from '../vote-option/VoteOption'\nimport { Voting } from '../../../types/Voting'\nimport { SelectedVotingOptionsData, submitSelectedVotingOptions } from './service'\nimport { useStyles } from './styles'\nimport SnackbarAlert from '../../common-components/snackbar-alert/SnackbarAlert'\nimport { Alert, Severity } from '../../../types/Alert'\nimport { Link } from 'react-router-dom'\n\n\n\nexport enum VoteAction {\n    VOTE = 'VOTE',\n    UNVOTE = 'UNVOTE'\n}\n\n\ntype SelectOptionsProps = {\n    voterName: string | undefined\n}\n\nconst getSelectionsDictionary = (votingData: Voting | undefined): undefined | Record<number, number> => {\n    if (!votingData) return undefined\n    const dictionary: Record<number, number> = {}\n    votingData.optionVotes.forEach(item => {\n        dictionary[item.id] = 0\n    })\n    return dictionary\n}\n\n\n\nconst SelectOptions: React.FC<SelectOptionsProps> = ({ voterName }) => {\n\n    const classes = useStyles()\n\n    const { state } = useContext(AppContext)\n    const [votingData] = useState(state.votingData)\n    const [votingDone, setVotingDone] = useState(false)\n    const [selectionDictionary, setSelectionDictionary] = useState(getSelectionsDictionary(state.votingData))\n    const [alert, setAlert] = useState<Alert | undefined>(undefined)\n\n\n\n    if (!votingData || !selectionDictionary) return null\n\n\n    const changeSelection = (id: number, action: VoteAction) => {\n        const votesGiven = votingData.optionVotes.reduce((total, current) => total + selectionDictionary[current.id], 0)\n        if (action === VoteAction.VOTE && votesGiven < votingData.allowedCount) {\n            const updated = { ...selectionDictionary }\n            updated[id] = selectionDictionary[id] + 1\n            setSelectionDictionary(updated)\n        } else if (selectionDictionary[id] > 0) {\n            const updated = { ...selectionDictionary }\n            updated[id] = selectionDictionary[id] - 1\n            setSelectionDictionary(updated)\n        }\n    }\n\n    const getAnswers = (): number[] => {\n        let answers: number[] = []\n        for (const [optionId, numberOfVotes] of Object.entries(selectionDictionary)) {\n            const numbers = new Array(numberOfVotes).fill(parseInt(optionId))\n            answers = answers.concat(numbers)\n        }\n        return answers\n    }\n\n    const vote = async () => {\n        const selectedVotingOptionsData: SelectedVotingOptionsData = {\n            name: voterName,\n            answers: getAnswers()\n        }\n        const answersSaved = await submitSelectedVotingOptions(selectedVotingOptionsData)\n        if (answersSaved) {\n            const alert: Alert = { isOpen: true, severity: Severity.SUCCESS, message: 'Votes successfully saved!', onClose: () => setAlert(undefined), autoHideDuration: 5000 }\n            setAlert(alert)\n            setVotingDone(true)\n        } else {\n            const alert: Alert = { isOpen: true, severity: Severity.ERROR, message: 'Could not submit votes!', onClose: () => setAlert(undefined), autoHideDuration: 5000 }\n            setAlert(alert)\n        }\n\n        \n    }\n\n    \n    const votesGiven = votingData.optionVotes.reduce((total, current) => total + selectionDictionary[current.id], 0)\n    const remainingNumberOfVotes = votingData.allowedCount - votesGiven\n\n\n    return(\n        <div>\n            <Typography variant='h5' className={classes.questionText}>\n                <strong>{votingData.question}</strong>\n            </Typography>\n            {votingData.optionVotes.map(item => <VoteOption\n                key={item.optionText}\n                id={item.id}\n                optionText={item.optionText}\n                changeSelection={changeSelection}\n                votes={selectionDictionary[item.id]}\n                remaining={remainingNumberOfVotes}\n                votingDone={votingDone}\n            />)}\n            <div className={classes.submitButtonContainer}>\n                {!votingDone && votesGiven > 0 &&\n                <Button onClick={vote} variant='contained'  className={classes.submitButton}>\n                    <Typography className={classes.submitButtonText}>\n                        SUBMIT VOTES\n                    </Typography>\n                </Button>\n                }\n                {votingDone && \n                    <Typography>\n                        <Link to='/view' className={classes.linkText}>\n                            View current voting situation \n                        </Link>\n                    </Typography>\n                }\n            </div>\n\n            {alert && <SnackbarAlert alert={alert}/>}\n        </div>\n      \n    )\n}\n\nexport default SelectOptions\n\n","import React, { useContext, useState } from 'react'\nimport AppContext from '../../../state/AppContext'\nimport { useGetVotingData } from '../get-data/useGetVotingData'\nimport ErrorDisplay from '../error-display/ErrorDisplay'\nimport EnterName from '../enter-name/EnterName'\nimport SelectOptions from '../select-options/SelectOptions'\n\n\n\nconst PerformVoting: React.FC = () => {\n\n    const [voterName, setVoterName] = useState<string | undefined>(undefined)\n    const { state } = useContext(AppContext)\n    const { errorInGettingData } = useGetVotingData()\n\n\n    if (!state.votingNumber) return null\n    if (errorInGettingData) return <ErrorDisplay votingNumber={state.votingNumber}/>\n    if (!state.votingData) return null\n    if (state.votingData.showNames && !voterName) return <EnterName setVoterName={setVoterName}/>\n    return <SelectOptions voterName={voterName}/>\n}\n\nexport default PerformVoting\n\n","import { useContext, useState, useEffect } from 'react'\nimport { actionTypes } from '../../../state/actions'\nimport { getVotingData } from './service'\nimport AppContext from '../../../state/AppContext'\n\n\ntype UseGetVotingData = {\n    errorInGettingData: boolean\n}\n\nexport const useGetVotingData = (): UseGetVotingData => {\n\n    const [errorInGettingData, setErrorInGettingData] = useState(false)\n    const { state, dispatch } = useContext(AppContext)\n\n    useEffect(() => {\n        async function getData() {\n            if (state.votingNumber !== undefined) {\n                const voting = await getVotingData(state.votingNumber)\n                if (voting !== undefined) {\n                    dispatch({ type: actionTypes.SET_VOTING_DATA, data: voting })\n                } else {\n                    setErrorInGettingData(true)\n                }\n            }\n\n        }\n        getData()\n    }, [])\n\n\n\n    return {\n        errorInGettingData\n    }\n\n}","import React, { useContext } from 'react'\nimport EnterVotingCode from '../enter-voting-code/EnterVotingCode'\nimport AppContext from '../../../state/AppContext'\nimport PerformVoting from '../perform-voting/PerformVoting'\n\n\n\nconst Vote: React.FC = () => {\n\n    const { state } = useContext(AppContext)\n\n\n    return(\n        <div>\n            {state.votingNumber === undefined ?\n                <EnterVotingCode/>\n                :\n                <PerformVoting/>\n            }\n        </div>\n      \n    )\n}\n\nexport default Vote"],"sourceRoot":""}